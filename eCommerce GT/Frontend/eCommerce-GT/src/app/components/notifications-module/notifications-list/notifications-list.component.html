<div class="container mt-4">
  <h2 class="text-center mb-3">Mis Notificaciones</h2>

  <table class="table table-striped table-hover" *ngIf="notifications.length > 0; else noData">
    <thead class="table-dark">
      <tr>
        <th>No.</th>
        <th>Título</th>
        <th>Usuario</th>
        <th>Mensaje</th>
        <th>Fecha</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let notif of notifications; let i = index">
        <td>{{ i + 1 + page * size }}</td>
        <td>{{ notif.subject || 'Sin título' }}</td>
        <td>{{ notif.userDpi }}</td>
        <td>{{ notif.message || 'Sin contenido' }}</td>
        <td>{{ notif.sendAt | date:'short' }}</td>
        <td>
          <span [ngClass]="notif.emailSent ? 'badge bg-success' : 'badge bg-secondary'">
            {{ notif.emailSent ? 'Enviada' : 'Pendiente' }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #noData>
    <div class="alert alert-info text-center">
      No tienes notificaciones disponibles.
    </div>
  </ng-template>

  <div class="d-flex justify-content-center mt-3" *ngIf="totalElements > size">
    <button class="btn btn-outline-primary me-2" (click)="prevPage()" [disabled]="page === 0">Anterior</button>
    <span class="align-self-center">Página {{ page + 1 }} de {{ totalPages }}</span>
    <button class="btn btn-outline-primary ms-2" (click)="nextPage()" [disabled]="page + 1 >= totalPages">
      Siguiente
    </button>
  </div>
</div>
